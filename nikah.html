<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Nikah Profiles</title>
<style>
:root{
  --green:#116530;
  --accent:#008069;
  --card-h:280px;
  --card-radius:12px;
  --muted:#777;
  --sky1:#6EC1FF;
  --sky2:#3AA8FF;
}

body{
  font-family:"Segoe UI",sans-serif;
  margin:0;
  background:#f5f7f5;
  color:#222;
  -webkit-font-smoothing:antialiased;
}

/* Header */
.site-header{
  position:sticky;
  top:0;
  z-index:60;
  background:linear-gradient(135deg,var(--sky1),var(--sky2));
  padding:10px 14px;
  display:flex;
  flex-direction:column;
  align-items:center;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
}

/* Logo + Admin */
.header-top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  width:100%;
  max-width:1100px;
}
.logo-3d{
  font-size:34px;
  font-weight:900;
  color:#fff;
  letter-spacing:2px;
  padding:6px 14px;
  border-radius:8px;
  text-shadow:
    0 2px 0 rgba(0,0,0,0.15),
    0 6px 0 rgba(0,0,0,0.12),
    0 12px 20px rgba(0,0,0,0.25);
  transform: perspective(400px) rotateX(6deg);
}

/* Buttons row */
.button-row{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:nowrap;
  overflow-x:auto;
  margin-top:8px;
  padding-bottom:6px;
  width:100%;
}
.header-btn{
  display:inline-flex;
  align-items:center;
  gap:6px;
  white-space:nowrap;
  background:#fff;
  color:var(--sky2);
  padding:8px 12px;
  border-radius:8px;
  border:none;
  text-decoration:none;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.08);
}
.header-btn:hover{ filter:brightness(0.97); }
.header-btn:active{ transform:translateY(1px); }

/* Main content */
main{
  max-width:1100px;
  margin:18px auto;
  padding:0 16px 60px;
}

/* Grid */
.grid{
  display:grid;
  gap:14px;
  grid-template-columns:repeat(2,1fr);
}
@media(min-width:768px){ .grid{ grid-template-columns:repeat(3,1fr); } }
@media(min-width:1024px){ .grid{ grid-template-columns:repeat(4,1fr); } }

/* Card */
.card{
  background:white;
  border-radius:var(--card-radius);
  overflow:hidden;
  height:var(--card-h);
  display:flex;
  flex-direction:column;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  cursor:pointer;
  transition:transform .15s;
}
.card:hover{ transform:translateY(-3px); }
.img-wrapper{ width:100%; height:150px; overflow:hidden; cursor:pointer; }
.img-wrapper img{ width:100%; height:100%; object-fit:cover; display:block; pointer-events:none; user-select:none; }
.card-body{ padding:10px; flex:1; }
.card-body h3{ margin:0; font-size:16px; color:var(--green); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.card-body .meta{ color:var(--muted); font-size:13px; }
.card-footer{ padding:10px; display:flex; gap:8px; flex-wrap:wrap; }

/* Buttons inside card */
.btn-wa{ background:#25d366; color:white; padding:6px 10px; border-radius:6px; border:none; cursor:pointer; font-weight:600; }
.btn-connect{ background:var(--accent); color:white; padding:6px 10px; border-radius:6px; border:none; cursor:pointer; font-weight:600; }

/* Profile popup */
#profilePopup{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,0.55);
  z-index:70;
}
.profile-card{
  background:white;
  width:95%;
  max-width:920px;
  border-radius:12px;
  overflow:auto;
  max-height:90vh;
  position:relative;
}
.profile-grid{ display:grid; grid-template-columns:320px 1fr; gap:16px; padding:18px; }
.profile-photo{ width:100%; height:420px; object-fit:cover; border-radius:8px; background:#eee; }
.profile-info{ padding:8px 4px; }
.profile-info h2{ margin:0 0 8px 0; color:var(--green); }
.profile-info .line{ margin:6px 0; color:#333; }
.close-btn{ position:absolute; right:18px; top:18px; background:#eee; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }

/* Admin / connect */
.connect-box{ background:white; padding:16px; border-radius:10px; width:95%; max-width:420px; box-shadow:0 10px 40px rgba(0,0,0,0.2); }
.connect-box input{ width:100%; padding:10px; margin:6px 0; border-radius:8px; border:1px solid #ddd; }
#connectPopup{ position:fixed; inset:0; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,0.45); z-index:75; }

@media(max-width:420px){
  .logo-3d{ font-size:26px; padding:4px 10px; }
  .header-btn{ padding:6px 10px; font-size:13px; }
}
</style>
</head>
<body>

<header class="site-header">
  <div class="header-top">
    <div class="logo-3d">‡§®‡§ø‡§ï‡§æ‡§π</div>
    <button class="header-btn" id="loginBtn" onclick="googleLogin()">Admin Login</button>
    <button class="header-btn" id="logoutBtn" onclick="logout()" style="display:none">Logout</button>
  </div>
  <nav class="button-row">
    <a class="header-btn" href="index.html">üè† Home</a>
    <a class="header-btn" href="nikah-Conditions.html">üìú ‡§π‡§Æ‡§æ‡§∞‡•á ‡§®‡§ø‡§Ø‡§Æ</a>
    <a class="header-btn" href="https://wa.me/9112170192" target="_blank">üì± WhatsApp Join</a>
  </nav>
</header>

<main>
  <div class="grid" id="members"></div>
</main>

<!-- Profile popup -->
<div id="profilePopup">
  <div class="profile-card">
    <button class="close-btn" onclick="closeProfile()">‚úñ</button>
    <div class="profile-grid">
      <div>
        <img id="p_photo" class="profile-photo" src="" alt="Profile photo">
      </div>
      <div class="profile-info">
        <h2 id="p_name">Name</h2>
        <div class="line"><strong>‡§â‡§Æ‡•ç‡§∞ / ‡§ú‡§®‡•ç‡§Æ‡§§‡§ø‡§•‡§ø:</strong> <span id="p_age"></span></div>
        <div class="line"><strong>‡§≤‡§ø‡§Ç‡§ó:</strong> <span id="p_gender"></span></div>
        <div class="line"><strong>‡§ï‡§¶:</strong> <span id="p_height"></span></div>
        <div class="line"><strong>‡§ß‡§∞‡•ç‡§Æ / ‡§´‡§ø‡§∞‡§ï‡§æ:</strong> <span id="p_religion"></span></div>
        <div class="line"><strong>‡§∂‡§π‡§∞ / ‡§∞‡§æ‡§ú‡•ç‡§Ø:</strong> <span id="p_city_state"></span></div>
        <div class="line"><strong>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ:</strong> <span id="p_education"></span></div>
        <div class="line"><strong>‡§™‡•á‡§∂‡§æ:</strong> <span id="p_profession"></span></div>
        <div class="line"><strong>‡§Ü‡§Ø:</strong> <span id="p_income"></span></div>
        <div class="line"><strong>WhatsApp:</strong> <span id="p_whatsapp"></span></div>
        <hr>
        <div class="line"><strong>Bio:</strong> <div id="p_bio"></div></div>
        <div class="line"><strong>Family:</strong> <div id="p_family"></div></div>
        <div style="margin-top:12px;">
          <a id="p_contact_btn" class="btn-wa" href="#" target="_blank">üìû Contact</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDMvkPqFKDjrMaLlBkercBYoLxEs1GEbng",
  authDomain: "all-madrsa.firebaseapp.com",
  projectId: "all-madrsa",
  storageBucket: "all-madrsa.appspot.com",
  messagingSenderId: "619313835874",
  appId: "1:619313835874:web:e387e1297663f11fc2463b"
};
const adminEmails=["zaradigitalseva@gmail.com"];
const defaultWhatsApp="9112170192";
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.firestore();
let currentUser=null;

auth.onAuthStateChanged(user=>{
  currentUser=user;
  document.getElementById('loginBtn').style.display = (user && adminEmails.includes(user.email)) ? 'none':'inline-block';
  document.getElementById('logoutBtn').style.display = (user && adminEmails.includes(user.email)) ? 'inline-block':'none';
  loadMembers();
});

function googleLogin(){ auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()); }
function logout(){ auth.signOut(); }

function esc(s){ return s?String(s):''; }

async function loadMembers(){
  const membersEl=document.getElementById('members');
  db.collection("members").orderBy("name").get().then(snapshot=>{
    membersEl.innerHTML='';
    snapshot.forEach(doc=>{
      const d=doc.data();
      const card=document.createElement('div');
      card.className='card';
      card.addEventListener('click',()=>openProfileDetail(doc.id,d));

      const imgWrap=document.createElement('div');
      imgWrap.className='img-wrapper';
      const img=document.createElement('img');
      img.src=esc(d.photo)||'';
      imgWrap.appendChild(img);

      const body=document.createElement('div');
      body.className='card-body';
      body.innerHTML=`<h3>${esc(d.name)}</h3><div class="meta">‡§â‡§Æ‡•ç‡§∞: ${esc(d.age)||"-"}</div>`;

      const footer=document.createElement('div');
      footer.className='card-footer';
      const contactBtn=document.createElement('button');
      contactBtn.className='btn-wa';
      contactBtn.textContent='üìû Contact';
      contactBtn.addEventListener('click',(ev)=>{ ev.stopPropagation(); window.open(`https://wa.me/${defaultWhatsApp}`,'_blank'); });
      const connectBtn=document.createElement('button');
      connectBtn.className='btn-connect';
      connectBtn.textContent='Connect';
      connectBtn.addEventListener('click',(ev)=>{ ev.stopPropagation(); window.open(`https://wa.me/${defaultWhatsApp}`,'_blank'); });

      footer.appendChild(contactBtn);
      footer.appendChild(connectBtn);
      card.appendChild(imgWrap);
      card.appendChild(body);
      card.appendChild(footer);
     
