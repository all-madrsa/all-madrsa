<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nikah Profiles</title>
<style>
:root{
  --green:#116530; --accent:#008069; --card-h:280px; --card-radius:12px; --muted:#777;
  --sky1:#6EC1FF; --sky2:#3AA8FF;
}
body{margin:0; font-family:"Segoe UI",sans-serif; background:#f5f7f5; color:#222;}
/* Header */
.site-header{
  position:sticky; top:0; z-index:60; background: linear-gradient(135deg,var(--sky1),var(--sky2));
  padding:10px 14px; box-shadow:0 6px 18px rgba(0,0,0,0.12);
}
.logo-row{ text-align:center; margin-bottom:8px; }
.logo-3d{
  display:inline-block; font-size:34px; font-weight:900; color:#fff; letter-spacing:2px; padding:6px 14px;
  border-radius:8px;
  text-shadow:0 2px 0 rgba(0,0,0,0.15),0 6px 0 rgba(0,0,0,0.12),0 12px 20px rgba(0,0,0,0.25);
  transform: perspective(400px) rotateX(6deg);
}
.button-row{
  display:flex; gap:10px; justify-content:center; align-items:center; flex-wrap:nowrap; overflow-x:auto; padding:6px 4px;
}
.header-btn{
  display:inline-flex; align-items:center; gap:8px; white-space:nowrap; background:#fff; color:#0b63a6;
  padding:6px 10px; border-radius:8px; border:none; text-decoration:none; font-weight:700; cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.06);
}
.header-btn:hover{filter:brightness(0.98);}
@media(max-width:420px){ .logo-3d{font-size:26px; padding:4px 10px;} .header-btn{padding:5px 8px; font-size:13px;}}

/* Grid */
.grid{ display:grid; gap:14px; grid-template-columns:repeat(2,1fr); padding:0 14px; }
@media(min-width:1024px){ .grid{ grid-template-columns:repeat(4,1fr); } }
.card{ background:white; border-radius:var(--card-radius); overflow:hidden; height:var(--card-h); display:flex; flex-direction:column; box-shadow:0 6px 18px rgba(0,0,0,0.08); cursor:pointer; transition:transform .15s;}
.card:hover{ transform:translateY(-4px);}
.img-wrapper{ width:100%; height:150px; overflow:hidden; display:block; }
.img-wrapper img{ width:100%; height:100%; object-fit:cover; display:block; }
.card-body{ padding:10px; display:flex; flex-direction:column; gap:6px; flex:1; align-items:flex-start; }
.card-body h3{ margin:0; font-size:16px; color:var(--green); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.card-body .meta{ color:var(--muted); font-size:13px; }
.card-footer{ padding:10px; display:flex; gap:8px; flex-wrap:wrap; }
.btn-wa{ background:#25d366; color:white; padding:6px 8px; border-radius:6px; font-weight:600; border:none; cursor:pointer; }
.btn-connect{ background:var(--accent); color:white; padding:6px 8px; border-radius:6px; border:none; cursor:pointer; font-weight:600; }

/* Profile popup */
#profilePopup{ position:fixed; inset:0; display:none; justify-content:center; align-items:center; background:rgba(0,0,0,0.55); z-index:60; }
.profile-card{ background:white; width:95%; max-width:920px; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,0.25); overflow:auto; max-height:90vh; position:relative; }
.profile-grid{ display:grid; grid-template-columns:320px 1fr; gap:16px; padding:18px; }
.profile-photo{ width:100%; height:420px; object-fit:cover; border-radius:8px; background:#eee; }
.profile-info{ padding:8px 4px; }
.profile-info h2{ margin:0 0 8px 0; color:var(--green); }
.profile-info .line{ margin:6px 0; color:#333; }
.close-btn{ position:absolute; right:18px; top:18px; background:#eee; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; }
</style>
</head>
<body>

<header class="site-header">
  <div class="logo-row"><div class="logo-3d">‡§®‡§ø‡§ï‡§æ‡§π</div></div>
  <nav class="button-row">
    <a class="header-btn" href="index.html">üè† Home</a>
    <a class="header-btn" href="nikah-Conditions.html">üìú ‡§π‡§Æ‡§æ‡§∞‡•á ‡§®‡§ø‡§Ø‡§Æ</a>
    <button class="header-btn" id="loginBtn" onclick="googleLogin()">Admin Login</button>
    <button class="header-btn" id="logoutBtn" onclick="logout()" style="display:none">Logout</button>
  </nav>
</header>

<main>
  <div class="grid" id="members"></div>
</main>

<div id="profilePopup">
  <div class="profile-card">
    <button class="close-btn" onclick="closeProfile()">‚úñ</button>
    <div class="profile-grid">
      <div style="padding:8px;"><img id="p_photo" class="profile-photo"></div>
      <div class="profile-info">
        <h2 id="p_name"></h2>
        <div class="line"><strong>‡§â‡§Æ‡•ç‡§∞:</strong> <span id="p_age"></span></div>
        <div class="line"><strong>‡§≤‡§ø‡§Ç‡§ó:</strong> <span id="p_gender"></span></div>
        <div class="line"><strong>‡§ï‡§¶:</strong> <span id="p_height"></span></div>
        <div class="line"><strong>‡§ß‡§∞‡•ç‡§Æ:</strong> <span id="p_religion"></span></div>
        <div class="line"><strong>‡§∂‡§π‡§∞ / ‡§∞‡§æ‡§ú‡•ç‡§Ø:</strong> <span id="p_city_state"></span></div>
        <div class="line"><strong>‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ:</strong> <span id="p_education"></span></div>
        <div class="line"><strong>‡§™‡•á‡§∂‡§æ:</strong> <span id="p_profession"></span></div>
        <div class="line"><strong>‡§Ü‡§Ø:</strong> <span id="p_income"></span></div>
        <div class="line"><strong>WhatsApp:</strong> <span id="p_whatsapp"></span></div>
        <div style="margin-top:12px;"><a id="p_contact_btn" class="btn-wa" href="#" target="_blank">üìû Contact</a></div>
      </div>
    </div>
  </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDMvkPqFKDjrMaLlBkercBYoLxEs1GEbng",
  authDomain: "all-madrsa.firebaseapp.com",
  projectId: "all-madrsa",
  storageBucket: "all-madrsa.appspot.com",
  messagingSenderId: "619313835874",
  appId: "1:619313835874:web:e387e1297663f11fc2463b"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const adminEmails = ["zaradigitalseva@gmail.com"];
let currentUser = null;

/* Header buttons */
const loginBtn = document.getElementById('loginBtn');
const logoutBtn = document.getElementById('logoutBtn');

/* Members grid */
const membersEl = document.getElementById('members');

/* Profile popup */
const profilePopup = document.getElementById('profilePopup');
const p_photo = document.getElementById('p_photo');
const p_name = document.getElementById('p_name');
const p_age = document.getElementById('p_age');
const p_gender = document.getElementById('p_gender');
const p_height = document.getElementById('p_height');
const p_religion = document.getElementById('p_religion');
const p_city_state = document.getElementById('p_city_state');
const p_education = document.getElementById('p_education');
const p_profession = document.getElementById('p_profession');
const p_income = document.getElementById('p_income');
const p_whatsapp = document.getElementById('p_whatsapp');
const p_contact_btn = document.getElementById('p_contact_btn');

function openProfileDetail(d){
  p_photo.src = d.photo;
  p_name.textContent = d.name;
  p_age.textContent = d.age;
  p_gender.textContent = d.gender;
  p_height.textContent = d.height;
  p_religion.textContent = d.religion;
  p_city_state.textContent = d.city_state;
  p_education.textContent = d.education;
  p_profession.textContent = d.profession;
  p_income.textContent = d.income;
  p_whatsapp.textContent = d.whatsapp;
  p_contact_btn.href = `https://wa.me/${d.whatsapp}`;
  profilePopup.style.display = 'flex';
}
function closeProfile(){ profilePopup.style.display='none'; }

/* Firebase Auth */
function googleLogin(){
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider).then(result=>{
    const user = result.user;
    if(adminEmails.includes(user.email)){
      currentUser = user;
      loginBtn.style.display='none';
      logoutBtn.style.display='inline-flex';
      alert('Admin logged in: '+user.email);
    } else {
      alert('Access denied: Not admin');
      auth.signOut();
    }
  }).catch(console.error);
}

function logout(){
  auth.signOut().then(()=>{
    currentUser = null;
    loginBtn.style.display='inline-flex';
    logoutBtn.style.display='none';
  });
}

/* Fetch members */
function fetchMembers(){
  membersEl.innerHTML='';
  db.collection("members").get().then(snapshot=>{
    snapshot.forEach(doc=>{
      const d = doc.data();
      const card = document.createElement('div');
      card.className='card';
      card.addEventListener('click',()=>openProfileDetail(d));

      const imgWrap = document.createElement('div');
      imgWrap.className='img-wrapper';
      const img = document.createElement('img');
      img.src = d.photo;
      imgWrap.appendChild(img);

      const body = document.createElement('div');
      body.className='card-body';
      body.innerHTML = `<h3>${d.name}</h3><div class="meta">‡§â‡§Æ‡•ç‡§∞: ${d.age}</div>`;

      const footer = document.createElement('div');
      footer.className='card-footer';
      const contactBtn = document.createElement('button');
      contactBtn.className='btn-wa';
      contactBtn.textContent='üìû Contact';
      contactBtn.addEventListener('click', ev=>{
        ev.stopPropagation();
        window.open(`https://wa.me/${d.whatsapp}`,'_blank');
      });
      footer.appendChild(contactBtn);

      card.appendChild(imgWrap);
      card.appendChild(body);
      card.appendChild(footer);
      membersEl.appendChild(card);
    });
  }).catch(console.error);
}

/* Load members */
fetchMembers();
</script>

</body>
</html>
