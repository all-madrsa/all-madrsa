<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vasai Live News</title>
<style>
body{font-family:sans-serif;background:#f6f7fb;margin:0;padding:0;}
.container{max-width:1000px;margin:auto;padding:12px;}
.header{display:flex;justify-content:space-between;align-items:center;padding:12px;background:#0ea5a4;color:white;border-radius:8px;}
button{padding:8px 12px;border:none;border-radius:8px;cursor:pointer;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;}
.card{background:white;padding:10px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h2>Vasai Live News</h2>
    <button id="adminBtn" style="display:none">Admin Login</button>
  </div>

  <input id="search" placeholder="Search articles..." style="width:100%;padding:8px;margin-top:12px;border-radius:8px;border:1px solid #ccc;">
  
  <div class="grid" id="grid"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyDMvkPqFKDjrMaLlBkercBYoLxEs1GEbng",
  authDomain:"all-madrsa.firebaseapp.com",
  projectId:"all-madrsa"
};
const ADMIN_EMAIL = "zaradigitalseva@gmail.com";
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.firestore();

const grid = document.getElementById('grid');
const adminBtn = document.getElementById('adminBtn');

// Show admin button only for admin email
auth.onAuthStateChanged(user=>{
  if(user && user.email===ADMIN_EMAIL){
    adminBtn.style.display='inline-block';
  } else {
    adminBtn.style.display='none';
  }
});

adminBtn.addEventListener('click',()=> window.location.href='admin.html');

// Load articles
db.collection('vasai_news').orderBy('ts','desc').onSnapshot(snapshot=>{
  grid.innerHTML='';
  snapshot.forEach(doc=>{
    const a=doc.data();
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`<strong>${a.title}</strong><br><small>${a.category}</small><p>${a.blocks.map(b=>b.type==='text'?b.text:'').join(' ')}</p>`;
    grid.appendChild(card);
  });
});
</script>
</body>
</html>
