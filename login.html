<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Login | Talimi Ittehad</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center h-screen bg-gray-100">
  <div class="bg-white p-6 rounded shadow text-center">
    <h1 class="text-lg font-bold mb-4">üîê Admin Login</h1>
    <button onclick="loginWithGoogle()" class="bg-indigo-600 text-white px-4 py-2 rounded">
      Login with Google
    </button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.7.2/firebase-auth.js";

    // üîë Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDMvkPqFKDjrMaLlBkercBYoLxEs1GEbng",
      authDomain: "all-madrsa.firebaseapp.com",
      projectId: "all-madrsa",
      storageBucket: "all-madrsa.appspot.com",
      messagingSenderId: "619313835874",
      appId: "1:619313835874:web:e387e1297663f11fc2463b"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // ‚úÖ Login with Google
    async function loginWithGoogle() {
      try {
        await signInWithPopup(auth, provider);

        // üîÑ Redirect back to previous page
        const redirectUrl = localStorage.getItem("redirectAfterLogin") || "index.html";
        localStorage.removeItem("redirectAfterLogin");
        window.location.href = redirectUrl;

      } catch (err) {
        alert("‚ùå Login failed: " + err.message);
      }
    }

    window.loginWithGoogle = loginWithGoogle;
  </script>
</body>
</html>
